{"componentChunkName":"component---src-components-blogs-blog-detail-js","path":"/blog/kick-starting-with-progressive-web-apps-part-3","result":{"pageContext":{"post":{"id":"73862f1f-89ea-549f-8a9b-513b5e39c593","title":"Kick starting with Progressive Web Apps Part 3","excerpt":"So far you have seen the resources get into the cache. But how do you get it out so that on a slow network or even no network you are still…","_rawBody":[{"_key":"0194c31d2e1f","_type":"block","children":[{"_key":"0194c31d2e1f0","_type":"span","marks":[],"text":"So far you have seen the resources get into the cache. But how do you get it out so that on a slow network or even no network you are still able to get the resources required to run our app. For this you need to intercept all the network requests by handling the fetch event in the service worker."}],"markDefs":[],"style":"normal"},{"_key":"3f900ac8ab93","_type":"code","code":"//service-worker.js\r\nself.addEventListener('fetch',function(e){\r\n    console.log(\"[Service Worker] Fetching REQUEST URL\",e.  request.url);\r\n   \r\n    e.respondWith(\r\n    caches.match(e.request).then(function(resp) {\r\n        console.log(\"Response from Cache\",resp)\r\n        return resp || fetch(e.request)\r\n    })\r\n    .catch(function() {\r\n      return console.log(\"Error Fallback\");\r\n    })\r\n  );\r\n})\r\ncaches.match evaluates the request and triggers the fetch and checks to see if it’s available in the cache.It then either responds with the cached version or uses fetch to get from the network.The response is then passed back to the page with e.respondWith.\r\nYou can also clone our network response and put in cache. So next in future if any requests comes, the cache response can be shown on the page quickly.\r\nNote: Request method ‘POST’ is unsupported in service worker. Thus, POST requests cannot be cached in Cache Storage via service worker.\r\n//service-worker.js\r\nself.addEventListener('fetch',function(e){\r\n    console.log(\"[Service Worker] Fetching REQUEST URL\",e. request.url);\r\n    e.respondWith(\r\n    caches.match(e.request).then(function(resp) {\r\n        console.log(\"Response from Cache\",resp)\r\n        return resp || fetch(e.request)\r\n        .then(function(response) {\r\n            return caches.open(cacheName).then(function(cache) \r\n            {\r\n             cache.put(e.request,response.clone());\r\n             return response;\r\n            });  \r\n       });\r\n    })\r\n    .catch(function() {\r\n      return console.log(\"Error Fallback\");\r\n    })\r\n  );\r\n})"},{"_key":"53b7a41475a2","_type":"block","children":[{"_key":"53b7a41475a20","_type":"span","marks":[],"text":"Your app should now cache its resources on the first load and then for subsequent loads return all resources from the cache. Thus, it can work even offline now!"}],"markDefs":[],"style":"normal"},{"_key":"a768cacb5d1b","_type":"block","children":[{"_key":"a768cacb5d1b0","_type":"span","marks":[],"text":"Service Worker are extremely flexible and let’s you decide how you are going to cache your resources."}],"markDefs":[],"style":"normal"},{"_key":"59890a4d8434","_type":"block","children":[{"_key":"59890a4d84340","_type":"span","marks":[],"text":"Have a look at some of the caching strategies."}],"markDefs":[],"style":"normal"},{"_key":"a465b25b92e2","_type":"block","children":[{"_key":"a465b25b92e20","_type":"span","marks":[],"text":"Cache First , then Network : A request matches with the cache entry respond with that. Otherwise try to fetch the resource from the network."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"832814a275f6","_type":"block","children":[{"_key":"832814a275f60","_type":"span","marks":[],"text":"Network First,then cache : Tries to handle request by fetching from the network. If the network request fails or times out it will try to fulfill from cache."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"a36348d96881","_type":"block","children":[{"_key":"a36348d968810","_type":"span","marks":[],"text":"Cache Only : Tries to resolve the request from the cache.If the resource isn’t cached it fails."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"5a8f8a3e0491","_type":"block","children":[{"_key":"5a8f8a3e04910","_type":"span","marks":[],"text":"Cache and Network race : Request the resource from cache and network in parallel. Then it responds with whichever responds first."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"905b188ec1b1","_type":"block","children":[{"_key":"905b188ec1b10","_type":"span","marks":[],"text":"Cache Then Network : Two parallel requests are made one to the cache and one to the network.The idea is to show the cached data first and then update the cache and the page when network data arrives."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"8e26d6e4a8ce","_type":"block","children":[{"_key":"8e26d6e4a8ce0","_type":"span","marks":[],"text":"These are handful of caching strategies and choosing the right one depends on what type of caching your application needs!"}],"markDefs":[],"style":"normal"},{"_key":"4f228035b247","_type":"block","children":[{"_key":"4f228035b2470","_type":"span","marks":["strong"],"text":"To kick start with Progressive Web App you can go through my blogs :"},{"_key":"4f228035b2471","_type":"span","marks":[],"text":"\n\n1) "},{"_key":"4f228035b2472","_type":"span","marks":["9b1548de9acb"],"text":"Register service worker and cache the resources in our app on the initial load."},{"_key":"4f228035b2473","_type":"span","marks":[],"text":"\n\n2) "},{"_key":"4f228035b2474","_type":"span","marks":["1705be8ea6a8"],"text":"Update the old service worker and cache the new response in Cache Storage."},{"_key":"4f228035b2475","_type":"span","marks":[],"text":"\n\n3) Get out the resources from the cache and intercept the network requests.\n\n4) "},{"_key":"4f228035b2476","_type":"span","marks":["e2a7864df68e"],"text":"Make our web app installable via the Web App Manifest File."},{"_key":"4f228035b2477","_type":"span","marks":[],"text":"\n\n5) "},{"_key":"4f228035b2478","_type":"span","marks":["714ea53f2094"],"text":"Grey out the things when offline."},{"_key":"4f228035b2479","_type":"span","marks":[],"text":""}],"markDefs":[{"_key":"9b1548de9acb","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-1-6701c9ea348"},{"_key":"1705be8ea6a8","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-2-99c3dd969446"},{"_key":"e2a7864df68e","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-4-cd901de01a82"},{"_key":"714ea53f2094","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-5-b7d6a4778bd1"}],"style":"blockquote"},{"Separatorr":true,"_key":"4afb49b2b6e8","_type":"separator"},{"_key":"115ed16a16eb","_type":"block","children":[{"_key":"115ed16a16eb0","_type":"span","marks":[],"text":""},{"_key":"115ed16a16eb1","_type":"span","marks":["strong","7c05c3d6a68f"],"text":"SoluteLabs"},{"_key":"115ed16a16eb2","_type":"span","marks":[],"text":" is a high-performance team of 25 focused on mobile and web design and development; we have produced top #10 chart topping applications on Android and iOS app stores, graphics that have gone viral and applications with Millions of downloads."}],"markDefs":[{"_key":"7c05c3d6a68f","_type":"link","href":"https://www.solutelabs.com/contact"}],"style":"normal"}],"_rawFaq":null,"publishedAt":"2017-03-28T18:30:00.000Z","_updatedAt":"2020-08-31T08:30:45Z","readingTime":"3 min read","altTagMainImage":null,"titleMetaData":null,"shortanchorlinkh2":[],"categories":[{"id":"61b2fbb3-23c5-54d6-aac3-bf8ba2dcecc3","title":"Blog"}],"mainImage":{"asset":{"id":"image-7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260-png","url":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png","fluid":{"sizes":"(max-width: 800px) 100vw, 800px","src":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png 2240w"}}},"author":{"id":"8cd84183-f4f8-5da6-a73e-8c9d74a15411","name":"Shailaja Shah","myColor":{"hex":"#1641ff"},"image":{"asset":{"_id":"image-7836057324a2978e02e64bb8256986a9215cdf03-288x288-png","assetId":"7836057324a2978e02e64bb8256986a9215cdf03","_type":"sanity.imageAsset","id":"image-7836057324a2978e02e64bb8256986a9215cdf03-288x288-png"},"_type":"image","_key":null},"slug":{"current":"shailaja-shah"}},"slug":{"current":"kick-starting-with-progressive-web-apps-part-3"},"tags":[{"id":"972e5e19-d560-545f-9fdc-3e57d3e0e53f","slug":{"current":"progressive-web-apps"},"title":"Progressive web apps"},{"id":"9b4c8e06-fe1d-54a8-b141-e28cfa915336","slug":{"current":"web-development"},"title":"Web Development"},{"id":"e1974141-9248-52b4-a703-c1eef63e4630","slug":{"current":"pwa"},"title":"PWA"}],"referenceBlogPost":[{"mainImage":{"asset":{"id":"image-fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"4 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-1"},"title":"Kick starting with Progressive Web Apps Part 1"},{"mainImage":{"asset":{"id":"image-607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"3 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-2"},"title":"Kick starting with Progressive Web Apps Part 2"}]},"readNextBlog":[{"mainImage":{"asset":{"id":"image-fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"4 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-1"},"title":"Kick starting with Progressive Web Apps Part 1"},{"mainImage":{"asset":{"id":"image-607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"3 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-2"},"title":"Kick starting with Progressive Web Apps Part 2"}],"blogSLug":"kick-starting-with-progressive-web-apps-part-3"}},"staticQueryHashes":["1951403926","2015784780","2763451262","3649515864","3810076356","4118766420"]}