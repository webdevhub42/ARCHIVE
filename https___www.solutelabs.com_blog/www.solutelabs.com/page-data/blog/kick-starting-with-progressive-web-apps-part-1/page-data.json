{"componentChunkName":"component---src-components-blogs-blog-detail-js","path":"/blog/kick-starting-with-progressive-web-apps-part-1","result":{"pageContext":{"post":{"id":"0323a443-4dab-54ef-8812-c613b4bb40b0","title":"Kick starting with Progressive Web Apps Part 1","excerpt":"A brief tutorial on how you can use service workers for your PWA.","_rawBody":[{"_key":"bb2df26e0aec","_type":"block","children":[{"_key":"bb2df26e0aec0","_type":"span","marks":[],"text":"By the end of the blog you’ll have your progressive web app which will use service worker to cache the required resources. So it’ll work whether you are online or offline. Finally you’ll learn how to make your web app installable via the web app manifest file. They will be available to the users who have the browser that support them."}],"markDefs":[],"style":"normal"},{"_key":"6c7160eaa46f","_type":"block","children":[{"_key":"6c7160eaa46f0","_type":"span","marks":[],"text":"Before we get into real code one thing you should be acquainted with while using service worker is it requires — HTTPS. If your site is not served over secure connection the browser simply won’t load the service worker. The only exception is during the development where local host and its equivalent are allowed. This may sound as an arbitrary requirement."}],"markDefs":[],"style":"normal"},{"_key":"4fe3ea9c493f","_type":"block","children":[{"_key":"4fe3ea9c493f0","_type":"span","marks":["em"],"text":"Service worker allows you to intercept network requests, modify them and redirect them. Well am sure we’ll use these power for good but there stands out some evil people out there. By requiring HTTPS you’ll feel confidential that service worker that gets install hasn’t been tampered with during its journey across the network."}],"markDefs":[],"style":"blockquote"},{"_key":"d9ab6b83a34f","_type":"block","children":[{"_key":"d9ab6b83a34f0","_type":"span","marks":["strong"],"text":"Note :"},{"_key":"d9ab6b83a34f1","_type":"span","marks":[],"text":" If you are unaware about the service workers you can have a look at : "},{"_key":"d9ab6b83a34f2","_type":"span","marks":["acabb59db505"],"text":"Service Worker"},{"_key":"d9ab6b83a34f3","_type":"span","marks":[],"text":"."}],"markDefs":[{"_key":"acabb59db505","_type":"link","href":"https://medium.com/@shailajashah93/technologies-behind-progressive-web-app-10ca5251842a"}],"style":"normal"},{"_key":"7f8642d1a0d9","_type":"block","children":[{"_key":"7f8642d1a0d90","_type":"span","marks":[],"text":"So let’s get started."}],"markDefs":[],"style":"normal"},{"_key":"2522737ea45c","_type":"block","children":[{"_key":"2522737ea45c0","_type":"span","marks":[],"text":"The first step you need to do is register the service worker in your web app. Initially create a service-worker.js empty file at root directory."}],"markDefs":[],"style":"normal"},{"_key":"e49b8b62ea62","_type":"block","children":[{"_key":"e49b8b62ea620","_type":"span","marks":["strong"],"text":"Note :"},{"_key":"e49b8b62ea621","_type":"span","marks":[],"text":" The navigator object contains information about the browser."}],"markDefs":[],"style":"normal"},{"_key":"4a3d96191a39","_type":"block","children":[{"_key":"4a3d96191a390","_type":"span","marks":[],"text":"All the browsers doesn’t support service worker, so what if this breaks our code ? We’ll use a condition that if a browser supports service worker than only register it :"}],"markDefs":[],"style":"normal"},{"_key":"9b22b92f5f39","_type":"code","code":"//index.html<script>\n\nif('serviceWorker' in navigator)\n{\nnavigator.serviceWorker.register('service-worker.js')\n.then(function(registration) {\nconsole.log('Service Worker Registered', registration);\n});\n}\n</script>"},{"_key":"d578c538a394","_type":"block","children":[{"_key":"d578c538a3940","_type":"span","marks":["strong"],"text":"Note"},{"_key":"d578c538a3941","_type":"span","marks":[],"text":": One of the reason why the service worker registration can fail while working in localhost is that — The path to your service worker file is not correctly written. It needs to be written relative to the origin, not your app’s root directory. For example : The service worker is at http://localhost/web-apps/service-worker.js, and the app’s root is http://localhost/web-apps/. But the path needs to be written as /web-apps/service-worker.js, not /service-worker.js."}],"markDefs":[],"style":"normal"},{"_key":"e5229361ec0b","_type":"block","children":[{"_key":"e5229361ec0b0","_type":"span","marks":[],"text":"When the service worker is registered it is limited to the scope specified meaning that it will only handle the requests limited to its scope."}],"markDefs":[],"style":"normal"},{"_key":"5771c8d3ecde","_type":"block","children":[{"_key":"5771c8d3ecde0","_type":"span","marks":[],"text":"In the above case the service worker has been registered at the root directory this means the service worker scope would be the entire origin. But if you write ‘/files/service-worker.js’ the service worker will only fetch the events which contain files in it."}],"markDefs":[],"style":"normal"},{"_key":"f31ddd70bc00","_type":"block","children":[{"_key":"f31ddd70bc000","_type":"span","marks":[],"text":"When the service worker is first registered it triggers the install event. This is the perfect time to pre-cache all the required resources. Lets add the event listener that will fire on the install event so that you can cache the required resources."}],"markDefs":[],"style":"normal"},{"_key":"0c311eb7ad9f","_type":"code","code":"//service-worker.js\n\nvar cacheName = 'cache_version1';\nvar cacheFiles = [\n'./static/js/bundle.js',\n'./static/media/preloader.c158de6c.gif'\n]\n\nself.addEventListener('install',function(e){\nconsole.log(\"[Service Worker] Installed\");\ne.waitUntil(\ncaches.open(cacheName).then(function(cache){\nconsole.log(\"[ServiceWorker] Caching cacheFiles\");\ncache.addAll(cacheFiles);\n})\n)\n})"},{"_key":"3515ece449e4","_type":"block","children":[{"_key":"3515ece449e40","_type":"span","marks":[],"text":""}],"markDefs":[],"style":"normal"},{"_key":"2c16d9882471","_type":"block","children":[{"_key":"2c16d98824710","_type":"span","marks":[],"text":"First you need to open up the cache with caches.open and provide a cache name. Once the cache is open you can call cache.addAll which takes the list of URL’s(resources which you want to store in cache) and then fetches them from the server and adds the response to the cache.Unfortunately cache.allAll is atomic. If any of the file fails the entire cache step will fail."}],"markDefs":[],"style":"normal"},{"_key":"dba4a8468541","_type":"block","children":[{"_key":"dba4a84685410","_type":"span","marks":["strong"],"text":"Note"},{"_key":"dba4a84685411","_type":"span","marks":[],"text":" : chrome://serviceworker-internals/ is a super helpful tool. Will show you all the installed service workers, their state , allowing you to update them or get rid of them."}],"markDefs":[],"style":"normal"},{"_key":"b08a858aa999","_type":"block","children":[{"_key":"b08a858aa9990","_type":"span","marks":[],"text":"If you are using chrome you can also have a look under Application tab in Developer Tools."}],"markDefs":[],"style":"normal"},{"_key":"a96b3a3ac0ff","_type":"customImage","alt":"Check that the service worker’s status of your site has become ACTIVATED.","asset":{"_ref":"image-795a3e9135ec09798fd944eea6bd7d172ad04670-700x288-png","_type":"reference"},"imageFigcaptionName":"Check that the service worker’s status of your site has become ACTIVATED."},{"_key":"f0b322b23e13","_type":"customImage","alt":"Check that the required resources have been cached under the specified cache name.","asset":{"_ref":"image-d2448812faa39f44f5bda4f771b076c6e29bdb6c-700x235-png","_type":"reference"},"imageFigcaptionName":"Check that the required resources have been cached under the specified cache name."},{"_key":"721cd1626375","_type":"customBlockQuote","customblockArray":[{"_key":"6d43132e8316","_type":"block","children":[{"_key":"6d43132e83160","_type":"span","marks":["strong"],"text":"To kick start with Progressive Web App you can go through my blogs :"}],"markDefs":[],"style":"normal"},{"_key":"f9aff4736a49","_type":"block","children":[{"_key":"f9aff4736a490","_type":"span","marks":[],"text":"1) Register service worker and cache the resources in our app on the initial load."}],"markDefs":[],"style":"normal"},{"_key":"9ed4c5c2fa20","_type":"block","children":[{"_key":"9ed4c5c2fa200","_type":"span","marks":[],"text":"2) "},{"_key":"9ed4c5c2fa201","_type":"span","marks":["98f7491aaaa3"],"text":"Update the old service worker and cache the new response in Cache Storage."},{"_key":"9ed4c5c2fa202","_type":"span","marks":[],"text":""}],"markDefs":[{"_key":"98f7491aaaa3","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-2-99c3dd969446"}],"style":"normal"},{"_key":"1120958b66df","_type":"block","children":[{"_key":"1120958b66df0","_type":"span","marks":[],"text":"3) "},{"_key":"1120958b66df1","_type":"span","marks":["c86b90b1975d"],"text":"Get out the resources from the cache and intercept the network requests."},{"_key":"1120958b66df2","_type":"span","marks":[],"text":""}],"markDefs":[{"_key":"c86b90b1975d","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-3-4d3f139f6f07"}],"style":"normal"},{"_key":"5d326bb72665","_type":"block","children":[{"_key":"5d326bb726650","_type":"span","marks":[],"text":"4) "},{"_key":"5d326bb726651","_type":"span","marks":["136ab8c982fb"],"text":"Make our web app installable via the Web App Manifest File."},{"_key":"5d326bb726652","_type":"span","marks":[],"text":""}],"markDefs":[{"_key":"136ab8c982fb","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-4-cd901de01a82"}],"style":"normal"},{"_key":"44dbf85a7448","_type":"block","children":[{"_key":"44dbf85a74480","_type":"span","marks":[],"text":"5) "},{"_key":"44dbf85a74481","_type":"span","marks":["05a2d805c568"],"text":"Grey out the things when offline."},{"_key":"44dbf85a74482","_type":"span","marks":[],"text":""}],"markDefs":[{"_key":"05a2d805c568","_type":"link","href":"https://medium.com/@shailajashah93/kick-starting-with-progressive-web-apps-part-5-b7d6a4778bd1"}],"style":"normal"}]},{"Separatorr":true,"_key":"c38cc0d52440","_type":"separator"},{"_key":"e9de1c59f04e","_type":"block","children":[{"_key":"e9de1c59f04e0","_type":"span","marks":[],"text":""},{"_key":"e9de1c59f04e1","_type":"span","marks":["strong","88f62391026a"],"text":"SoluteLabs"},{"_key":"e9de1c59f04e2","_type":"span","marks":[],"text":" is a high-performance team of 25 focused on mobile and web design and development; we have produced top #10 chart topping applications on Android and iOS app stores, graphics that have gone viral and applications with Millions of downloads."}],"markDefs":[{"_key":"88f62391026a","_type":"link","href":"https://www.solutelabs.com/solutelabs-portfolio"}],"style":"normal"}],"_rawFaq":null,"publishedAt":"2017-03-28T18:30:00.000Z","_updatedAt":"2020-08-31T08:29:57Z","readingTime":"4 min read","altTagMainImage":null,"titleMetaData":null,"shortanchorlinkh2":[],"categories":[{"id":"61b2fbb3-23c5-54d6-aac3-bf8ba2dcecc3","title":"Blog"}],"mainImage":{"asset":{"id":"image-fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260-png","url":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png","fluid":{"sizes":"(max-width: 800px) 100vw, 800px","src":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/fb6fb5be6a5039126ace78bfe6128f6a1df82641-2240x1260.png 2240w"}}},"author":{"id":"8cd84183-f4f8-5da6-a73e-8c9d74a15411","name":"Shailaja Shah","myColor":{"hex":"#1641ff"},"image":{"asset":{"_id":"image-7836057324a2978e02e64bb8256986a9215cdf03-288x288-png","assetId":"7836057324a2978e02e64bb8256986a9215cdf03","_type":"sanity.imageAsset","id":"image-7836057324a2978e02e64bb8256986a9215cdf03-288x288-png"},"_type":"image","_key":null},"slug":{"current":"shailaja-shah"}},"slug":{"current":"kick-starting-with-progressive-web-apps-part-1"},"tags":[{"id":"e1974141-9248-52b4-a703-c1eef63e4630","slug":{"current":"pwa"},"title":"PWA"},{"id":"972e5e19-d560-545f-9fdc-3e57d3e0e53f","slug":{"current":"progressive-web-apps"},"title":"Progressive web apps"},{"id":"9b4c8e06-fe1d-54a8-b141-e28cfa915336","slug":{"current":"web-development"},"title":"Web Development"}],"referenceBlogPost":[{"mainImage":{"asset":{"id":"image-607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"3 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-2"},"title":"Kick starting with Progressive Web Apps Part 2"},{"mainImage":{"asset":{"id":"image-7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"3 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-3"},"title":"Kick starting with Progressive Web Apps Part 3"}]},"readNextBlog":[{"mainImage":{"asset":{"id":"image-607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/607b60a355a5ff7f23b2d4dda0a8e6fe75b30456-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"3 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-2"},"title":"Kick starting with Progressive Web Apps Part 2"},{"mainImage":{"asset":{"id":"image-7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260-png","fluid":{"src":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=800&h=450&fit=crop","srcSet":"https://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=200&h=113&fit=crop 200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=400&h=225&fit=crop 400w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=800&h=450&fit=crop 800w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=1200&h=675&fit=crop 1200w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png?w=1600&h=900&fit=crop 1600w,\nhttps://cdn.sanity.io/images/ay6gmb6r/production/7296bfd7f03279dfd9b02fd290d6ab539d3fa952-2240x1260.png 2240w","sizes":"(max-width: 800px) 100vw, 800px"}}},"publishedAt":"2017-03-28T18:30:00.000Z","readingTime":"3 min read","author":{"name":"Shailaja Shah"},"slug":{"current":"kick-starting-with-progressive-web-apps-part-3"},"title":"Kick starting with Progressive Web Apps Part 3"}],"blogSLug":"kick-starting-with-progressive-web-apps-part-1"}},"staticQueryHashes":["1951403926","2015784780","2763451262","3649515864","3810076356","4118766420"]}