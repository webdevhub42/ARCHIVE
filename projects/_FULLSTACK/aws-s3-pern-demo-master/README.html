<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="aws-s3-demo-with-pern-stack">AWS S3 Demo with PERN Stack</h1>
    <p><a href="https://aws-s3-pern-demo.herokuapp.com">Live Version</a></p>
    <ul>
      <li>Postgres</li>
      <li>Express</li>
      <li>React</li>
      <li>Node</li>
    </ul>
    <h2 id="set-up">Set Up</h2>
    <h4 id="packages-to-install-in-your-backend">
      Packages to install in your backend
    </h4>
    <ul>
      <li><a href="https://www.npmjs.com/package/multer">multer</a></li>
      <li><a href="https://www.npmjs.com/package/aws-sdk">aws-sdk</a></li>
      <li>
        <a href="https://www.npmjs.com/package/body-parser">body-parser</a>
      </li>
    </ul>
    <h4 id="create-your-aws-user-and-bucket">
      Create your AWS User and Bucket
    </h4>
    <p>
      Navigate to
      <a href="https://s3.console.aws.amazon.com/s3/home?region=us-east-1"
        >https://s3.console.aws.amazon.com/s3/home?region=us-east-1</a
      >
      click on “create bucket”, enter a name, choose a region, and leave all
      other options as default.
    </p>
    <p>
      Head to
      <a href="https://console.aws.amazon.com/iam/home?#/users"
        >https://console.aws.amazon.com/iam/home?#/users</a
      >
      to create a new user. Name the user whatever you like. Give the user
      <code>Programmatic access</code>. Proceed to the next step. Now you need
      to set up the security policy for your new user. This is how they will be
      allowed to connect. Click ‘Attach existing policies directly’ and then
      ‘Create Policy’. This will open up a new tab.
    </p>
    <p>
      In the new tab, click the <code>JSON</code> tab and paste the following:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">&quot;Version&quot;</span><span class="fu">:</span> <span class="st">&quot;2012-10-17&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="dt">&quot;Statement&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">      <span class="dt">&quot;Sid&quot;</span><span class="fu">:</span> <span class="st">&quot;Stmt1420751757000&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">      <span class="dt">&quot;Effect&quot;</span><span class="fu">:</span> <span class="st">&quot;Allow&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">      <span class="dt">&quot;Action&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;s3:*&quot;</span><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-8" title="8">      <span class="dt">&quot;Resource&quot;</span><span class="fu">:</span> <span class="st">&quot;arn:aws:s3:::&lt;NAME OF BUCKET&gt;/*&quot;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="fu">}</span></a></code></pre>
    </div>
    <p>
      Make sure to replace <code>&lt;NAME OF BUCKET&gt;</code> with the name of
      your bucket. Click Review Policy.
    </p>
    <p>
      Give the policy whatever name you like
      (e.g. s3-access-to-name-of-project). After you save and create the policy,
      head back over to the other tab/window where you are creating a new user.
    </p>
    <p>
      Click the refresh button all the way to the right of the
      <code>Create Policy</code> button then search for the policy that you just
      created. Check that policy then head over to the next step. You can skip
      additional tags. Create the user.
    </p>
    <p>
      After you create the user, you will get the <code>Access Key ID</code> and
      the <code>Secret Access Key</code>. Download the .csv file
      <strong>Store this somewhere safe on your computer</strong>
    </p>
    <h2 id="update-app.js-in-backend">Update app.js in backend</h2>
    <p>
      In your app.js import the body-parser you module you installed in your
      backend node_modules.
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> bodyParser <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;body-parser&quot;</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      Change the line of code that says <code>app.use(express.json())</code> to
      the following:
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">app</span>.<span class="at">use</span>(<span class="va">bodyParser</span>.<span class="at">urlencoded</span>(<span class="op">{</span> <span class="dt">extended</span><span class="op">:</span> <span class="kw">false</span> <span class="op">}</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">app</span>.<span class="at">use</span>(<span class="va">bodyParser</span>.<span class="at">json</span>())<span class="op">;</span></a></code></pre>
    </div>
    <p>
      You can learn more about the body parser module here:
      <a href="https://www.npmjs.com/package/body-parser">body-parser</a>
    </p>
    <h2 id="set-up-aws-s3-in-your-backend">Set up AWS S3 in your backend</h2>
    <h3 id="awss3.js">
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/backend/awsS3.js"
        ><code>awsS3.js</code></a
      >
    </h3>
    <p>
      Make a file called <code>awsS3.js</code> at the root of your backend
      directory.
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/backend/awsS3.js"
        >Link to file</a
      >
      Copy the contents of
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/backend/awsS3.js"
        >this file</a
      >
      into the file you just created.
    </p>
    <p>
      <strong
        >Rename the <code>NAME_OF_BUCKET</code> constant at the top of the
        <code>awsS3.js</code> file to match the name of your bucket.</strong
      >
    </p>
    <p>
      In there, you will see that you are using the package,
      <code>aws-sdk</code>, after setting up your credentials for aws, be sure
      to add them to your <code>.env</code> file
    </p>
    <pre><code>AWS_ACCESS_KEY_ID=&lt;Your access key here&gt;
AWS_SECRET_ACCESS_KEY=&lt;Your secret access key here&gt;</code></pre>
    <h4 id="how-to-set-up-your-credentials">How to set up your credentials</h4>
    <p>
      All you need to do is set environmental keys for
      <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>. Aws
      will then automatically use those environment variables. When you deploy
      to heroku, you will also need to set these environment variables there as
      well.
    </p>
    <blockquote>
      <p>
        You can read more about how AWS uses the environment variables here:
        <a
          href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/loading-node-credentials-environment.html"
          >https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/loading-node-credentials-environment.html</a
        >
      </p>
    </blockquote>
    <p><strong>MAKE SURE TO GITIGNORE YOUR .ENV FILE</strong></p>
    <h2 id="private-vs-public-file-uploading">
      Private vs Public File Uploading
    </h2>
    <p>
      If you absolutely don’t want your file images to be publicly available by
      just any user, you want your files to be private. If you don’t care if
      users are able to access those files (e.g. on Twitter, posts are public so
      any photos with those posts can be publicly viewed), then you can set up
      the files to be publicly read.
    </p>
    <p>
      Public upload is recommended for most of the uses cases for your portfolio
      projects.
    </p>
    <h3 id="public-files">Public Files</h3>
    <p>How to set up uploading and reading public files on the backend.</p>
    <h4 id="public-file-write-configuration">
      Public File Write Configuration
    </h4>
    <p>
      Take a look at the function <code>singlePublicFileUpload</code> in the
      your <code>awsS3.js</code>. It accepts a single file which to upload to
      AWS S3.
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> singlePublicFileUpload <span class="op">=</span> <span class="kw">async</span> (file) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">const</span> <span class="op">{</span> originalname<span class="op">,</span> mimetype<span class="op">,</span> buffer <span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> file<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="kw">const</span> path <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;path&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="co">// name of the file in your S3 bucket will be the date in ms plus the extension name</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="kw">const</span> Key <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">getTime</span>().<span class="at">toString</span>() <span class="op">+</span> <span class="va">path</span>.<span class="at">extname</span>(originalname)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="kw">const</span> uploadParams <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="dt">Bucket</span><span class="op">:</span> NAME_OF_BUCKET<span class="op">,</span></a>
<a class="sourceLine" id="cb5-8" title="8">    Key<span class="op">,</span></a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="dt">Body</span><span class="op">:</span> buffer<span class="op">,</span></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="dt">ACL</span><span class="op">:</span> <span class="st">&quot;public-read&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="op">};</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="va">s3</span>.<span class="at">upload</span>(uploadParams).<span class="at">promise</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-13" title="13"></a>
<a class="sourceLine" id="cb5-14" title="14">  <span class="co">// save the name of the file in your bucket as the key in your database to retrieve for later</span></a>
<a class="sourceLine" id="cb5-15" title="15">  <span class="cf">return</span> <span class="va">result</span>.<span class="at">Location</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="op">};</span></a></code></pre>
    </div>
    <p>
      You will generate a key on S3 that you can use to identify the file that
      you will be uploading by using a timestamp which guarantees that they key
      will always be unique.
    </p>
    <p>
      <code
        >const Key = new Date().getTime().toString() +
        path.extname(originalname);</code
      >
    </p>
    <p>
      The upload parameters to S3 include a key-value pair,
      <code>ACL: "public-read"</code>. This tells the bucket that this file can
      be publicly read by anyone who has the link to the file.
    </p>
    <p>
      S3 sends back data on the saved file which is saved to the variable
      <code>result</code>.
    </p>
    <p><code>const result = await s3.upload(uploadParams).promise();</code></p>
    <p>
      You will be saving this url link that S3 generates for us to your database
      which can be extracted from <code>result.Location</code>
    </p>
    <p>
      Now all you need is the file to pass into the
      <code>singlePublicFileUpload</code> function. In this walkthrough you are
      going to be importing it to one of your routes -
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/backend/routes/api/users.js"
        >Users Routes</a
      >. But you can use the same logic in any route you’d like.
    </p>
    <p>
      In this file, you need to import the
      <code>singlePublicFileUpload</code> function as well as the
      <code>singleMulterUpload</code> middleware from the
      <code>awsS3.js</code> file.
    </p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="co">// Post /api/users ---Sign up</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">router</span>.<span class="at">post</span>(</a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="st">&quot;/&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="at">singleMulterUpload</span>(<span class="st">&quot;image&quot;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb6-5" title="5">  validateSignup<span class="op">,</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="at">asyncHandler</span>(<span class="kw">async</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="kw">const</span> <span class="op">{</span> email<span class="op">,</span> password<span class="op">,</span> username <span class="op">}</span> <span class="op">=</span> <span class="va">req</span>.<span class="at">body</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-8" title="8">    <span class="kw">const</span> profileImageUrl <span class="op">=</span> <span class="cf">await</span> <span class="at">singlePublicFileUpload</span>(<span class="va">req</span>.<span class="at">file</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="kw">const</span> user <span class="op">=</span> <span class="cf">await</span> <span class="va">User</span>.<span class="at">signup</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-10" title="10">      username<span class="op">,</span></a>
<a class="sourceLine" id="cb6-11" title="11">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb6-12" title="12">      password<span class="op">,</span></a>
<a class="sourceLine" id="cb6-13" title="13">      profileImageUrl<span class="op">,</span></a>
<a class="sourceLine" id="cb6-14" title="14">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-15" title="15"></a>
<a class="sourceLine" id="cb6-16" title="16">    <span class="at">setTokenCookie</span>(res<span class="op">,</span> user)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-17" title="17"></a>
<a class="sourceLine" id="cb6-18" title="18">    <span class="cf">return</span> <span class="va">res</span>.<span class="at">json</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-19" title="19">      user<span class="op">,</span></a>
<a class="sourceLine" id="cb6-20" title="20">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-21" title="21">  <span class="op">}</span>)</a>
<a class="sourceLine" id="cb6-22" title="22">)<span class="op">;</span></a></code></pre>
    </div>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// in awsS3.js</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">const</span> storage <span class="op">=</span> <span class="va">multer</span>.<span class="at">memoryStorage</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="dt">destination</span><span class="op">:</span> <span class="kw">function</span> (req<span class="op">,</span> file<span class="op">,</span> callback) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="at">callback</span>(<span class="kw">null</span><span class="op">,</span> <span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="op">},</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">// in awsS3.js</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="kw">const</span> singleMulterUpload <span class="op">=</span> (nameOfKey) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb7-10" title="10">  <span class="at">multer</span>(<span class="op">{</span> <span class="dt">storage</span><span class="op">:</span> storage <span class="op">}</span>).<span class="at">single</span>(nameOfKey)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      <code>singleMulterUpload</code> is a function that generates the
      middleware necessary to convert the data from your form into readable
      fields and files. This function accepts the key to which you expect the
      files to be saved under in your data (<code>"image"</code> in this case).
    </p>
    <p>
      Connect the <code>singleMulterUpload</code> middleware to your
      <code>POST /api/users</code> route, and then you can access the file in
      your request under the key of file - <code>req.file</code>
    </p>
    <p>
      Because the <code>singlePublicFileUpload</code> is an async function, it
      returns a promise. That promise returns the file URL that you want to save
      to your database. In this case, you want to save that url under the key of
      <code>profileImageUrl</code> on the new User.
    </p>
    <h4 id="public-file-read-configuration">Public File Read Configuration</h4>
    <p><strong>On AWS S3 Console</strong></p>
    <p>
      Access your bucket public permissions:
      <img
        src="assets/block-public-access.png"
        alt="Access Your Bucket Permissions"
      />
    </p>
    <p>
      Unblock all public access. Your images are going to be accessible to the
      public for this demo. Be careful when setting this for more sensitive
      information in the future where you do want to block public access.
    </p>
    <p>Hit Save</p>
    <p><strong>Sending up the files to your frontend</strong></p>
    <p>
      All you need to read the files on your frontend is the url path to the
      file that you saved to the database. Nothing special is needed other than
      the saved S3 URL.
    </p>
    <h3 id="multiple-files-backend">Multiple Files Backend</h3>
    <p>
      Take a look at the <code>multiplePublicFileUpload</code>, and
      <code>multipleMulterUpload</code> functions in the following file,
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/backend/awsS3.js"
        ><code>awsS3.js</code></a
      >. These functions are used in the same way as the single file upload
      functions above.
    </p>
    <h2 id="file-upload-on-the-frontend">File Upload on the Frontend</h2>
    <p>
      You will be using fetch for this example. To send files, the Content-Type
      Header must be <code>"multipart/form-data"</code>. In your custom fetch
      function, <code>csrfFetch</code>, in the csrf.js file you have these lines
      of code:
    </p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;Content-Type&quot;</span>] <span class="op">=</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;Content-Type&quot;</span>] <span class="op">||</span> <span class="st">&quot;application/json&quot;</span><span class="op">;</span></a></code></pre>
    </div>
    <p>
      By adding formData to the body of your request, the browser will
      automatically set the appropriate headers and boundaries so you need to
      remove the <code>Content-Type</code> header if it is multipart/form-data.
    </p>
    <p>The entire if statement should now look like this:</p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="cf">if</span> (<span class="va">options</span>.<span class="va">method</span>.<span class="at">toUpperCase</span>() <span class="op">!==</span> <span class="st">&quot;GET&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="cf">if</span> (<span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;Content-Type&quot;</span>] <span class="op">===</span> <span class="st">&quot;multipart/form-data&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="kw">delete</span> <span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;Content-Type&quot;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;Content-Type&quot;</span>] <span class="op">=</span></a>
<a class="sourceLine" id="cb9-6" title="6">      <span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;Content-Type&quot;</span>] <span class="op">||</span> <span class="st">&quot;application/json&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="va">options</span>.<span class="at">headers</span>[<span class="st">&quot;XSRF-Token&quot;</span>] <span class="op">=</span> <span class="va">Cookies</span>.<span class="at">get</span>(<span class="st">&quot;XSRF-TOKEN&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="op">}</span></a></code></pre>
    </div>
    <p>
      In the
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/frontend/src/store/session.js"
        ><code>session.js</code></a
      >
      file, you will be defining your <code>createUser</code> thunk which
      accepts an object of key value pairs and turns them into
      <code>FormData</code> entries to send with your request.
    </p>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="co">// user_actions.js</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">const</span> SET_USER <span class="op">=</span> <span class="st">&quot;session/setUser&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">const</span> setUser <span class="op">=</span> (user) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="dt">type</span><span class="op">:</span> SET_USER<span class="op">,</span></a>
<a class="sourceLine" id="cb10-6" title="6">  <span class="dt">payload</span><span class="op">:</span> user<span class="op">,</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-8" title="8"></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="im">export</span> <span class="kw">const</span> createUser <span class="op">=</span> (user) <span class="kw">=&gt;</span> <span class="kw">async</span> (dispatch) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="kw">const</span> <span class="op">{</span> images<span class="op">,</span> image<span class="op">,</span> username<span class="op">,</span> email<span class="op">,</span> password <span class="op">}</span> <span class="op">=</span> user<span class="op">;</span></a>
<a class="sourceLine" id="cb10-11" title="11">  <span class="kw">const</span> formData <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-12" title="12">  <span class="va">formData</span>.<span class="at">append</span>(<span class="st">&quot;username&quot;</span><span class="op">,</span> username)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-13" title="13">  <span class="va">formData</span>.<span class="at">append</span>(<span class="st">&quot;email&quot;</span><span class="op">,</span> email)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-14" title="14">  <span class="va">formData</span>.<span class="at">append</span>(<span class="st">&quot;password&quot;</span><span class="op">,</span> password)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-15" title="15"></a>
<a class="sourceLine" id="cb10-16" title="16">  <span class="co">// for multiple files</span></a>
<a class="sourceLine" id="cb10-17" title="17">  <span class="cf">if</span> (images <span class="op">&amp;&amp;</span> <span class="va">images</span>.<span class="at">length</span> <span class="op">!==</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-18" title="18">    <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">images</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-19" title="19">      <span class="va">formData</span>.<span class="at">append</span>(<span class="st">&quot;images&quot;</span><span class="op">,</span> images[i])<span class="op">;</span></a>
<a class="sourceLine" id="cb10-20" title="20">    <span class="op">}</span></a>
<a class="sourceLine" id="cb10-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb10-22" title="22"></a>
<a class="sourceLine" id="cb10-23" title="23">  <span class="co">// for single file</span></a>
<a class="sourceLine" id="cb10-24" title="24">  <span class="cf">if</span> (image) <span class="va">formData</span>.<span class="at">append</span>(<span class="st">&quot;image&quot;</span><span class="op">,</span> image)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-25" title="25"></a>
<a class="sourceLine" id="cb10-26" title="26">  <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="at">csrfFetch</span>(<span class="vs">`/api/users/`</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-27" title="27">    <span class="dt">method</span><span class="op">:</span> <span class="st">&quot;POST&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-28" title="28">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-29" title="29">      <span class="st">&quot;Content-Type&quot;</span><span class="op">:</span> <span class="st">&quot;multipart/form-data&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-30" title="30">    <span class="op">},</span></a>
<a class="sourceLine" id="cb10-31" title="31">    <span class="dt">body</span><span class="op">:</span> formData<span class="op">,</span></a>
<a class="sourceLine" id="cb10-32" title="32">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-33" title="33"></a>
<a class="sourceLine" id="cb10-34" title="34">  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="va">res</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-35" title="35">  <span class="at">dispatch</span>(<span class="at">setUser</span>(<span class="va">data</span>.<span class="at">user</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb10-36" title="36"><span class="op">};</span></a></code></pre>
    </div>
    <p>You can now add a new case to your reducer</p>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">    <span class="cf">case</span> <span class="dt">SET_USER</span><span class="op">:</span></a>
<a class="sourceLine" id="cb11-3" title="3">      <span class="cf">return</span> <span class="op">{</span> ...<span class="at">state</span><span class="op">,</span> <span class="dt">user</span><span class="op">:</span> <span class="va">action</span>.<span class="at">payload</span> <span class="op">};</span></a></code></pre>
    </div>
    <p>
      The form itself should look just like a regular React form. Take a look at
      this form for an example:
      <a
        href="https://github.com/jamesurobertson/aws-s3-pern-demo/blob/master/frontend/src/pages/CreateUser.js"
        >CreateUser</a
      >
    </p>
    <div class="sourceCode" id="cb12">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="co">// CreateUser.js file</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="im">import</span> <span class="op">{</span> useState <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="im">import</span> <span class="op">{</span> createUser <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;../store/session&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="im">import</span> <span class="op">{</span> useDispatch<span class="op">,</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;react-redux&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-5" title="5"></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="kw">const</span> CreateUser <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-7" title="7">  <span class="kw">const</span> [username<span class="op">,</span> setUsername] <span class="op">=</span> <span class="at">useState</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-8" title="8">  <span class="kw">const</span> [email<span class="op">,</span> setEmail] <span class="op">=</span> <span class="at">useState</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-9" title="9">  <span class="kw">const</span> [password<span class="op">,</span> setPassword] <span class="op">=</span> <span class="at">useState</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-10" title="10">  <span class="kw">const</span> [image<span class="op">,</span> setImage] <span class="op">=</span> <span class="at">useState</span>(<span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-11" title="11">  <span class="co">// for multuple file upload</span></a>
<a class="sourceLine" id="cb12-12" title="12">  <span class="co">//   const [images, setImages] = useState([]);</span></a>
<a class="sourceLine" id="cb12-13" title="13">  <span class="kw">const</span> [errors<span class="op">,</span> setErrors] <span class="op">=</span> <span class="at">useState</span>([])<span class="op">;</span></a>
<a class="sourceLine" id="cb12-14" title="14"></a>
<a class="sourceLine" id="cb12-15" title="15">  <span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-16" title="16">  <span class="kw">const</span> user <span class="op">=</span> <span class="at">useSelector</span>((state) <span class="kw">=&gt;</span> <span class="va">state</span>.<span class="va">session</span>.<span class="at">user</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-17" title="17"></a>
<a class="sourceLine" id="cb12-18" title="18">  <span class="kw">const</span> handleSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-19" title="19">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-20" title="20">    <span class="kw">let</span> newErrors <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb12-21" title="21">    <span class="at">dispatch</span>(<span class="at">createUser</span>(<span class="op">{</span> username<span class="op">,</span> email<span class="op">,</span> password<span class="op">,</span> image <span class="op">}</span>))</a>
<a class="sourceLine" id="cb12-22" title="22">      .<span class="at">then</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-23" title="23">        <span class="at">setUsername</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-24" title="24">        <span class="at">setEmail</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-25" title="25">        <span class="at">setPassword</span>(<span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-26" title="26">        <span class="at">setImage</span>(<span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-27" title="27">      <span class="op">}</span>)</a>
<a class="sourceLine" id="cb12-28" title="28">      .<span class="at">catch</span>(<span class="kw">async</span> (res) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-29" title="29">        <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="va">res</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-30" title="30">        <span class="cf">if</span> (data <span class="op">&amp;&amp;</span> <span class="va">data</span>.<span class="at">errors</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-31" title="31">          newErrors <span class="op">=</span> <span class="va">data</span>.<span class="at">errors</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-32" title="32">          <span class="at">setErrors</span>(newErrors)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-33" title="33">        <span class="op">}</span></a>
<a class="sourceLine" id="cb12-34" title="34">      <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-35" title="35">  <span class="op">};</span></a>
<a class="sourceLine" id="cb12-36" title="36"></a>
<a class="sourceLine" id="cb12-37" title="37">  <span class="kw">const</span> updateFile <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-38" title="38">    <span class="kw">const</span> file <span class="op">=</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">files</span>[<span class="dv">0</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb12-39" title="39">    <span class="cf">if</span> (file) <span class="at">setImage</span>(file)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-40" title="40">  <span class="op">};</span></a>
<a class="sourceLine" id="cb12-41" title="41"></a>
<a class="sourceLine" id="cb12-42" title="42">  <span class="co">// for multiple file upload</span></a>
<a class="sourceLine" id="cb12-43" title="43">  <span class="co">//   const updateFiles = (e) =&gt; {</span></a>
<a class="sourceLine" id="cb12-44" title="44">  <span class="co">//     const files = e.target.files;</span></a>
<a class="sourceLine" id="cb12-45" title="45">  <span class="co">//     setImages(files);</span></a>
<a class="sourceLine" id="cb12-46" title="46">  <span class="co">//   };</span></a>
<a class="sourceLine" id="cb12-47" title="47"></a>
<a class="sourceLine" id="cb12-48" title="48">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb12-49" title="49">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-50" title="50">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>AWS S3 Express<span class="op">-</span>React Demo&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-51" title="51">      <span class="op">{</span><span class="va">errors</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb12-52" title="52">        <span class="va">errors</span>.<span class="at">map</span>((error) <span class="kw">=&gt;</span> <span class="op">&lt;</span>div key<span class="op">={</span>error<span class="op">}&gt;{</span>error<span class="op">}</span>&lt;/div<span class="op">&gt;</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb12-53" title="53">      <span class="op">&lt;</span>form</a>
<a class="sourceLine" id="cb12-54" title="54">        style<span class="op">={{</span> <span class="dt">display</span><span class="op">:</span> <span class="st">&quot;flex&quot;</span><span class="op">,</span> <span class="dt">flexFlow</span><span class="op">:</span> <span class="st">&quot;column&quot;</span> <span class="op">}}</span></a>
<a class="sourceLine" id="cb12-55" title="55">        onSubmit<span class="op">={</span>handleSubmit<span class="op">}</span></a>
<a class="sourceLine" id="cb12-56" title="56">      <span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-57" title="57">        <span class="op">&lt;</span>label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-58" title="58">          <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb12-59" title="59">            type<span class="op">=</span><span class="st">&quot;text&quot;</span></a>
<a class="sourceLine" id="cb12-60" title="60">            placeholder<span class="op">=</span><span class="st">&quot;Username&quot;</span></a>
<a class="sourceLine" id="cb12-61" title="61">            value<span class="op">={</span>username<span class="op">}</span></a>
<a class="sourceLine" id="cb12-62" title="62">            onChange<span class="op">={</span>(e) <span class="kw">=&gt;</span> <span class="at">setUsername</span>(<span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb12-63" title="63">          /&gt;</a>
<a class="sourceLine" id="cb12-64" title="64">        &lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-65" title="65">        <span class="op">&lt;</span>label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-66" title="66">          <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb12-67" title="67">            type<span class="op">=</span><span class="st">&quot;email&quot;</span></a>
<a class="sourceLine" id="cb12-68" title="68">            placeholder<span class="op">=</span><span class="st">&quot;Email&quot;</span></a>
<a class="sourceLine" id="cb12-69" title="69">            value<span class="op">={</span>email<span class="op">}</span></a>
<a class="sourceLine" id="cb12-70" title="70">            onChange<span class="op">={</span>(e) <span class="kw">=&gt;</span> <span class="at">setEmail</span>(<span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb12-71" title="71">          /&gt;</a>
<a class="sourceLine" id="cb12-72" title="72">        &lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-73" title="73">        <span class="op">&lt;</span>label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-74" title="74">          <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb12-75" title="75">            type<span class="op">=</span><span class="st">&quot;password&quot;</span></a>
<a class="sourceLine" id="cb12-76" title="76">            placeholder<span class="op">=</span><span class="st">&quot;Password&quot;</span></a>
<a class="sourceLine" id="cb12-77" title="77">            value<span class="op">={</span>password<span class="op">}</span></a>
<a class="sourceLine" id="cb12-78" title="78">            onChange<span class="op">={</span>(e) <span class="kw">=&gt;</span> <span class="at">setPassword</span>(<span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb12-79" title="79">          /&gt;</a>
<a class="sourceLine" id="cb12-80" title="80">        &lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-81" title="81">        <span class="op">&lt;</span>label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-82" title="82">          <span class="op">&lt;</span>input type<span class="op">=</span><span class="st">&quot;file&quot;</span> onChange<span class="op">={</span>updateFile<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb12-83" title="83">        &lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-84" title="84">        <span class="op">{</span><span class="co">/* &lt;label&gt;</span></a>
<a class="sourceLine" id="cb12-85" title="85"><span class="co">            Multiple Upload</span></a>
<a class="sourceLine" id="cb12-86" title="86"><span class="co">            &lt;input </span></a>
<a class="sourceLine" id="cb12-87" title="87"><span class="co">              type=&quot;file&quot;</span></a>
<a class="sourceLine" id="cb12-88" title="88"><span class="co">              multiple</span></a>
<a class="sourceLine" id="cb12-89" title="89"><span class="co">              onChange={updateFiles} /&gt;</span></a>
<a class="sourceLine" id="cb12-90" title="90"><span class="co">          &lt;/label&gt; */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb12-91" title="91">        <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&quot;submit&quot;</span><span class="op">&gt;</span>Create User&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-92" title="92">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-93" title="93">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-94" title="94">        <span class="op">{</span>user <span class="op">&amp;&amp;</span> (</a>
<a class="sourceLine" id="cb12-95" title="95">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-96" title="96">            <span class="op">&lt;</span>h1<span class="op">&gt;{</span><span class="va">user</span>.<span class="at">username</span><span class="op">}</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-97" title="97">            <span class="op">&lt;</span>img</a>
<a class="sourceLine" id="cb12-98" title="98">              style<span class="op">={{</span> <span class="dt">width</span><span class="op">:</span> <span class="st">&quot;150px&quot;</span> <span class="op">}}</span></a>
<a class="sourceLine" id="cb12-99" title="99">              src<span class="op">={</span><span class="va">user</span>.<span class="at">profileImageUrl</span><span class="op">}</span></a>
<a class="sourceLine" id="cb12-100" title="100">              alt<span class="op">=</span><span class="st">&quot;profile&quot;</span></a>
<a class="sourceLine" id="cb12-101" title="101">            /&gt;</a>
<a class="sourceLine" id="cb12-102" title="102">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-103" title="103">        )<span class="op">}</span></a>
<a class="sourceLine" id="cb12-104" title="104">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-105" title="105">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-106" title="106">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb12-107" title="107"><span class="op">};</span></a>
<a class="sourceLine" id="cb12-108" title="108"></a>
<a class="sourceLine" id="cb12-109" title="109"><span class="im">export</span> <span class="im">default</span> CreateUser<span class="op">;</span></a></code></pre>
    </div>
  </body>
</html>
